/* =========================
   Gemeinsame Styles
   ========================= */

/* 0) Root-Variablen und Basis */
:root { --base-font: 12px; }
html { font-size: var(--base-font); }

/* Visually Hidden: Screenreader sichtbar */
.visually-hidden {
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap;
}

/* 1) Basis-Styles (Body, Header, etc.) */
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: #E6F5FF;
  color: #333;
  margin: 0;
  padding: 0;
}

.school-logo {
  display: block;
  margin: 1em auto 0;
  max-height: 60px;
}

.header {
  background: #0078D4;
  color: #fff;
  padding: 1em;
  text-align: center;
  font-size: 1.5rem;
  font-weight: 600;
  margin-top: 0.5em;
}

main {
  max-width: 1000px;
  margin: 0 auto;
  padding: 0 1em;
  box-sizing: border-box;
}

/* 2) Navigations-Tabs */
.nav-tabs {
  display: flex;
  justify-content: center;
  gap: 2em;
  margin-top: 0.5em;
  list-style: none;
  padding: 0.5em 0;
  background-color: #0078D4;
  border-bottom: 3px solid #005BB5;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

.nav-tabs li {
  list-style: none;
}

.nav-tabs a {
  color: #fff !important;
  text-decoration: none;
  font-size: 1.25rem;
  font-weight: 500;
  padding: 0.5em 0;
  border-bottom: 2px solid transparent;
}

.nav-tabs a:hover,
.nav-tabs a:focus {
  border-bottom-color: #fff;
  outline: none;
}

.nav-tabs a[aria-current="page"] {
  border-bottom-color: #fff;
  color: #fff;
}

/* 3) Container */
.container {
  max-width: 700px;
  margin: 1.5em auto;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.1);
  padding: 1.5em;
  box-sizing: border-box;
}

/* 4) Formular (task-form) */
.task-form {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5em;
  margin-bottom: 1.5em;
  align-items: center;
}

.task-form select,
.task-form input[type="date"],
.task-form input[type="text"] {
  pointer-events: auto;
  position: relative;
  z-index: 1;
  flex: 1 1 200px;
  padding: 0.5em;
  border: 1px solid #CBD4E1;
  border-radius: 6px;
  background: #F8FBFF;
  font-size: 1rem;
  box-sizing: border-box;
}

.task-form textarea {
  flex: 1 1 100%;
  height: 80px;
  padding: 0.5em;
  border: 1px solid #CBD4E1;
  border-radius: 6px;
  background: #F8FBFF;
  font-size: 1rem;
  box-sizing: border-box;
}

/* Datei-Label */
.file-label {
  flex: 1 1 calc(70% - 0.5em);
  display: flex;
  align-items: center;
  justify-content: center;
  height: 44px;
  background: #F8FBFF;
  border: 1px solid #CBD4E1;
  border-radius: 6px;
  cursor: pointer;
  box-sizing: border-box;
}

.file-label .icon {
  font-size: 1.2rem;
  margin-right: 0.5em;
  color: #555;
}

.file-label span {
  font-size: 0.9rem;
  color: #555;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 80%;
}

.file-label input { display: none; }

/* Button "Hinzufügen" */
.task-form button {
  flex: 1 1 calc(30% - 0.5em);
  background: #0078D4;
  color: #fff;
  border: none;
  padding: 0.75em;
  font-size: 1rem;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: background 0.2s;
  box-sizing: border-box;
}

.task-form button:hover {
  background: #0069C1;
}

/* 5) Aufgabenliste */
.task-list { list-style: none; padding: 0; margin: 0; }

.task {
  display: flex;
  flex-direction: column;
  border-radius: 8px;
  margin-bottom: 1em;
  background: #FFFFFF;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  overflow: hidden;
}

.task:nth-child(even) { background: #F9FBFD; }
.task:last-child { margin-bottom: 0; }

.task-header {
  display: flex;
  align-items: flex-start;
  gap: 0.5em;
  padding: 1em;
  position: relative;
  box-sizing: border-box;
}

.meta {
  flex-shrink: 0;
  width: 11em;
  font-size: 0.9rem;
  color: #333;
  box-sizing: border-box;
}

.meta .date { display: block; font-weight: 600; }
.meta .subject { display: block; margin-top: 0.25em; font-weight: 600; color: #0078D4; }

.content { flex-grow: 1; font-size: 1rem; box-sizing: border-box; }
.content .title { font-weight: bold; }
.content .description { margin-top: 0.25em; color: #555; font-size: 0.9rem; }

.attachments {
  padding: 0.5em 1em;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5em;
  background: #F8FBFF;
  box-sizing: border-box;
}

.attachment {
  display: flex;
  align-items: center;
  gap: 0.25em;
  font-size: 0.9rem;
  background: #FFFFFF;
  border: 1px solid #CBD4E1;
  border-radius: 6px;
  padding: 0.25em 0.5em;
  cursor: pointer;
  box-shadow: 0 1px 2px rgba(0,0,0,0.05);
  box-sizing: border-box;
}

.attachment .icon { font-size: 1rem; }
.attachment span {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 80%;
  box-sizing: border-box;
}

.attachment-icon {
  width: 1.2rem;
  height: 1.2rem;
  margin-right: 0.25rem;
  flex-shrink: 0;
}

.controls {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  gap: 0.5em;
  margin-left: auto;
  box-sizing: border-box;
}

.checkbox {
  width: 18px;
  height: 18px;
  cursor: pointer;
  box-sizing: border-box;
}

/* Status-Klassen */
.task.done { opacity: 0.6; }
.due-today .task-header { background: #FFF8E1; }
.overdue .task-header { border-left: 4px solid #E81123; }

/* 6) Vorschau-Overlay (gemeinsam) */
#preview-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  backdrop-filter: blur(4px);
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

#preview-modal {
  background: #fff;
  border-radius: 12px;
  max-width: 80%;
  max-height: 80%;
  padding: 16px;
  position: relative;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  overflow: auto;
}

#preview-close {
  position: absolute;
  top: 8px;
  right: 8px;
  background: transparent;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: #555;
}

#preview-content img,
#preview-content .file-icon {
  max-width: 100%;
  max-height: 70vh;
  display: block;
  margin: 0 auto;
}

.download-btn {
  display: none;
  margin: 12px auto 0;
  padding: 0.5em 1em;
  background: #0078D4;
  color: #fff;
  text-decoration: none;
  border-radius: 8px;
  font-size: 1rem;
  text-align: center;
  box-sizing: border-box;
}

/* 7) Responsive */
@media (max-width: 600px) {
  .task-form { flex-direction: column; }

  .task-form select,
  .task-form input[type="date"],
  .task-form input[type="text"],
  .task-form .file-label,
  .task-form button {
    flex: 1 1 auto;
  }

  .task-header { flex-direction: column; align-items: flex-start; }
  .meta { width: auto; }
  .controls { margin-top: 0.5em; }
}

/* 8) Dark Mode (optional) */
.dark-mode body { background: #1c1c1e; color: #e5e5e7; }
.dark-mode .header { background: #2c2c2e; color: #f2f2f5; }
.dark-mode .nav-tabs { background-color: #2c2c2e; border-bottom-color: #444; }
.dark-mode .nav-tabs a { color: #f2f2f5 !important; }
.dark-mode .container { background: #2c2c2e; box-shadow: 0 4px 16px rgba(0,0,0,0.4); }
.dark-mode .task-form select,
.dark-mode .task-form input[type="text"],
.dark-mode .task-form input[type="date"],
.dark-mode .task-form textarea,
.dark-mode .setting-item input[type="checkbox"],
.dark-mode .setting-item select {
  background: #3a3a3c;
  color: #e5e5e7;
  border: 1px solid #5a5a5c;
}
.dark-mode .task { background: #2c2c2e; box-shadow: 0 1px 3px rgba(0,0,0,0.5); }
.dark-mode .task:nth-child(even) { background: #252528; }
.dark-mode .meta, .dark-mode .content .description { color: #c7c7cc; }
.dark-mode #preview-modal { background: #2c2c2e; color: #e5e5e7; }
.dark-mode .download-btn { background: #505054; color: #f2f2f5; }
.dark-mode #preview-close, .dark-mode #settings-close { color: #f2f2f5; }
.dark-mode .setting-item input[type="checkbox"]:checked + label { color: #e5e5e7; }
.dark-mode ::-webkit-scrollbar { width: 8px; }
.dark-mode ::-webkit-scrollbar-thumb { background-color: #5a5a5c; border-radius: 4px; }

/* 9) Themes (gemeinsam) */
/* Standard */
.theme-standard body { background: #E6F5FF; color: #333333; }
.theme-standard .header { background: #0078D4; color: #FFFFFF; }
.theme-standard .nav-tabs { background-color: #0078D4; border-bottom: 3px solid #005BB5; }
.theme-standard .nav-tabs a { color: #FFFFFF !important; }
.theme-standard .container { background: #FFFFFF; box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1); }
.theme-standard .task { background: #FFFFFF; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05); }
.theme-standard .task:nth-child(even) { background: #F9FBFD; }
.theme-standard .meta, .theme-standard .content .description { color: #333333; }
.theme-standard #preview-modal { background: #FFFFFF; color: #333333; }
.theme-standard .download-btn { background: #0078D4; color: #FFFFFF; }
.theme-standard #preview-close, .theme-standard #settings-close { color: #555555; }
.theme-standard ::-webkit-scrollbar { width: 8px; }
.theme-standard ::-webkit-scrollbar-thumb { background-color: #CBD4E1; border-radius: 4px; }

/* Beruhigendes Blau */
.theme-beruhigendes-blau body { background: #F5F7FA; color: #2D3E50; }
.theme-beruhigendes-blau .header { background: #3F7CAC; color: #F5F7FA; }
.theme-beruhigendes-blau .nav-tabs { background-color: #3F7CAC; border-bottom: 3px solid #2A5D87; }
.theme-beruhigendes-blau .nav-tabs a { color: #F5F7FA !important; }
.theme-beruhigendes-blau .container { background: #F5F7FA; box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1); }
.theme-beruhigendes-blau .task { background: #FFFFFF; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.theme-beruhigendes-blau .task:nth-child(even) { background: #E4EBF2; }
.theme-beruhigendes-blau .meta, .theme-beruhigendes-blau .content .description { color: #2D3E50; }
.theme-beruhigendes-blau #preview-modal { background: #F5F7FA; color: #2D3E50; }
.theme-beruhigendes-blau .download-btn { background: #3F7CAC; color: #ffffff; }
.theme-beruhigendes-blau #preview-close, .theme-beruhigendes-blau #settings-close { color: #5D8AA8; }
.theme-beruhigendes-blau ::-webkit-scrollbar { width: 8px; }
.theme-beruhigendes-blau ::-webkit-scrollbar-thumb { background-color: #BDC9D7; border-radius: 4px; }
.theme-beruhigendes-blau .task-form button, .theme-beruhigendes-blau .download-btn { background: #3F7CAC; color: #ffffff; }

/* Erdtoene */
.theme-erdtoene body { background: #F8F5F0; color: #3A3226; }
.theme-erdtoene .header { background: #5E6F64; color: #F8F5F0; }
.theme-erdtoene .nav-tabs { background-color: #5E6F64; border-bottom: 3px solid #3D4D42; }
.theme-erdtoene .nav-tabs a { color: #F8F5F0 !important; }
.theme-erdtoene .container { background: #F8F5F0; box-shadow: 0 4px 16px rgba(0,0,0,0.1); }
.theme-erdtoene .task { background: #FFFFFF; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.theme-erdtoene .task:nth-child(even) { background: #E8E0D5; }
.theme-erdtoene .meta, .theme-erdtoene .content .description { color: #3A3226; }
.theme-erdtoene #preview-modal { background: #F8F5F0; color: #3A3226; }
.theme-erdtoene .download-btn { background: #5E6F64; color: #F8F5F0; }
.theme-erdtoene #preview-close, .theme-erdtoene #settings-close { color: #7D9D9C; }
.theme-erdtoene ::-webkit-scrollbar { width: 8px; }
.theme-erdtoene ::-webkit-scrollbar-thumb { background-color: #C7BCB0; border-radius: 4px; }
.theme-erdtoene .task-form button, .theme-erdtoene .download-btn { background: #5E6F64; color: #ffffff; }

/* Gedaempftes Pastell */
.theme-gedaempftes-pastell body { background: #F5F5F5; color: #4A4A4A; }
.theme-gedaempftes-pastell .header { background: #9EB3C2; color: #F5F5F5; }
.theme-gedaempftes-pastell .nav-tabs { background-color: #9EB3C2; border-bottom: 3px solid #7D95A3; }
.theme-gedaempftes-pastell .nav-tabs a { color: #F5F5F5 !important; }
.theme-gedaempftes-pastell .container { background: #F5F5F5; box-shadow: 0 4px 16px rgba(0,0,0,0.1); }
.theme-gedaempftes-pastell .task { background: #FFFFFF; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.theme-gedaempftes-pastell .task:nth-child(even) { background: #E8E8E8; }
.theme-gedaempftes-pastell .meta, .theme-gedaempftes-pastell .content .description { color: #4A4A4A; }
.theme-gedaempftes-pastell #preview-modal { background: #F5F5F5; color: #4A4A4A; }
.theme-gedaempftes-pastell .download-btn { background: #9EB3C2; color: #F5F5F5; }
.theme-gedaempftes-pastell #preview-close, .theme-gedaempftes-pastell #settings-close { color: #B8BEDD; }
.theme-gedaempftes-pastell ::-webkit-scrollbar { width: 8px; }
.theme-gedaempftes-pastell ::-webkit-scrollbar-thumb { background-color: #D1D1D1; border-radius: 4px; }
.theme-gedaempftes-pastell .task-form button, .theme-gedaempftes-pastell .download-btn { background: #9EB3C2; color: #333333; }

/* Naturinspiriert */
.theme-naturinspiriert body { background: #F0F4F1; color: #30372D; }
.theme-naturinspiriert .header { background: #678568; color: #F0F4F1; }
.theme-naturinspiriert .nav-tabs { background-color: #678568; border-bottom: 3px solid #4A6349; }
.theme-naturinspiriert .nav-tabs a { color: #F0F4F1 !important; }
.theme-naturinspiriert .container { background: #F0F4F1; box-shadow: 0 4px 16px rgba(0,0,0,0.1); }
.theme-naturinspiriert .task { background: #FFFFFF; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.theme-naturinspiriert .task:nth-child(even) { background: #E0E8E1; }
.theme-naturinspiriert .meta, .theme-naturinspiriert .content .description { color: #30372D; }
.theme-naturinspiriert #preview-modal { background: #F0F4F1; color: #30372D; }
.theme-naturinspiriert .download-btn { background: #678568; color: #F0F4F1; }
.theme-naturinspiriert #preview-close, .theme-naturinspiriert #settings-close { color: #A9C5A0; }
.theme-naturinspiriert ::-webkit-scrollbar { width: 8px; }
.theme-naturinspiriert ::-webkit-scrollbar-thumb { background-color: #C5D2C6; border-radius: 4px; }
.theme-naturinspiriert .task-form button, .theme-naturinspiriert .download-btn { background: #678568; color: #FBFDF4; }

/* Lavendel & Neutral */
.theme-lavendel-neutral body { background: #F5F2F7; color: #363239; }
.theme-lavendel-neutral .header { background: #7D6B91; color: #F5F2F7; }
.theme-lavendel-neutral .nav-tabs { background-color: #7D6B91; border-bottom: 3px solid #5D4F6C; }
.theme-lavendel-neutral .nav-tabs a { color: #F5F2F7 !important; }
.theme-lavendel-neutral .container { background: #F5F2F7; box-shadow: 0 4px 16px rgba(0,0,0,0.1); }
.theme-lavendel-neutral .task { background: #FFFFFF; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.theme-lavendel-neutral .task:nth-child(even) { background: #E7E1ED; }
.theme-lavendel-neutral .meta, .theme-lavendel-neutral .content .description { color: #363239; }
.theme-lavendel-neutral #preview-modal { background: #F5F2F7; color: #363239; }
.theme-lavendel-neutral .download-btn { background: #7D6B91; color: #F5F2F7; }
.theme-lavendel-neutral #preview-close, .theme-lavendel-neutral #settings-close { color: #A899BE; }
.theme-lavendel-neutral ::-webkit-scrollbar { width: 8px; }
.theme-lavendel-neutral ::-webkit-scrollbar-thumb { background-color: #CBC1D5; border-radius: 4px; }
.theme-lavendel-neutral .task-form button, .theme-lavendel-neutral .download-btn { background: #7D6B91; color: #FFFFFF; }

/* --- Mobile: Formular-Felder vollflächig --- */
@media (max-width: 640px) {
  .form-container { padding-inline: 12px; }

  .task-form {
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
    max-width: 100%;
  }

  /* alle direkten Formular-Elemente auf volle Breite */
  .task-form > * {
    box-sizing: border-box;
    display: block;
    width: 100%;
    min-width: 0;           /* verhindert Überlauf in iOS Safari */
  }

  .task-form select,
  .task-form input[type="text"],
  .task-form input[type="date"],
  .task-form textarea {
    width: 100%;
  }

  .task-form .file-label { width: 100%; }
  .task-form button { width: 100%; }  /* falls Button auch volle Breite soll */
}

